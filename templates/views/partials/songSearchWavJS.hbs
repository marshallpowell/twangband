<script language="JavaScript">

    $(document).ready(function () {

        var wavesurfers = (wavesurfers) ? wavesurfers : [];


        {{#each songDtos}}
            {{#if fileName}}

                wavesurfers['{{id}}'] = WaveSurfer.create({
                    container: document.querySelector('#wav_{{id}}'),
                    waveColor: '#1989D4',
                    progressColor: '#2BAD1D ',
                    scrollParent: false,
                    interact: false,
                    height: 75
                });


                wavesurfers['{{id}}'].load('{{@root.CDN}}/{{fileName}}');
                wavesurfers['{{id}}'].on('ready', (function(){
                    document.getElementById('wav_loading_{{id}}').remove();
                }));
                wavesurfers['{{id}}'].on('destroy', (function(){
                    document.getElementById('wav_loading_{{id}}').remove();
                }));
                wavesurfers['{{id}}'].on('error', (function(){
                    document.getElementById('wav_loading_{{id}}').remove();
                }));

                document.getElementById('play_{{id}}').addEventListener('click', function (e) {
                    wavesurfers['{{id}}'].playPause();
                });

            {{/if}}

        {{/each}}
    });

</script>
